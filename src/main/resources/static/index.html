<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <title>Log Viewer</title>
</head>
<body>
<h1>Log Viewer</h1>

<style>
    /* Inputun eni və hündürlüyü */
    #serialInput {
        width: 800px;   /* enini böyütmək üçün */
        height: 40px;   /* hündürlüyü böyütmək üçün */
        font-size: 18px; /* mətnin ölçüsü */
        padding: 5px;   /* daxilində boşluq */
    }

    /* Select elementinin ölçüsü */
    #logFiles {
        width: 400px;
        height: 35px;
        font-size: 16px;
    }

    /* Düymənin ölçüsü */
    button {
        width: 100px;
        height: 40px;
        font-size: 16px;
    }
</style>


<label for="logFiles">Log fayl seç:</label>
<select id="logFiles"></select>

<br><br>

<input type="text" id="serialInput" placeholder="Serial daxil edin">
<button onclick="fetchLog()">Axtar</button>



<h2 style="color: #207f0c;">Bill List</h2>
<ul id="billList" style="color: #f10000"></ul>

<h2 style="color: #207f0c">Register</h2>
<ul id="registerList" style="color: #f10000"></ul>

<h2 style="color: #207f0c">Pay</h2>
<ul id="payList" style="color: #f10000"></ul>

<script>
    // səhifə açılan kimi faylları yüklə
    fetch('/api/filter/files')
        .then(resp => resp.json())
        .then(files => {
            const select = document.getElementById('logFiles');
            files.forEach(file => {
                const option = document.createElement('option');
                option.value = file;
                option.textContent = file;
                select.appendChild(option);
            });
        });

    function fetchLog() {
        const serial = document.getElementById('serialInput').value;
        const file = document.getElementById('logFiles').value;

        fetch(`/api/filter/${file}/${serial}`)
            .then(resp => resp.json())
            .then(data => {
                // Bill List
                const billUl = document.getElementById('billList');
                billUl.innerHTML = '';
                data.billList.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    billUl.appendChild(li);
                });

                // Register
                const registerUl = document.getElementById('registerList');
                registerUl.innerHTML = '';
                data.register.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    registerUl.appendChild(li);
                });

                // Pay
                const payUl = document.getElementById('payList');
                payUl.innerHTML = '';
                data.pay.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    payUl.appendChild(li);
                });
            })
            .catch(err => console.error('Error fetching log:', err));
    }
</script>
</body>
</html>
